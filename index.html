<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buzz Off - Multiplayer Dengue Card Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>Welcome to Buzz Off!</h1>
        <p>Multiplayer Dengue Awareness Card Game</p>
        <button id="start-game">Start Game</button>
    </header>

    <section id="info">
        <h2>What is Dengue?</h2>
        <p>Dengue is a viral disease caused by the dengue virus, primarily transmitted by infected Aedes mosquitoes.</p>
        <p><img src="https://www.techexplorist.com/wp-content/uploads/2018/12/Dengue-Virus.jpg" alt="Dengue Virus" class="responsive-image"></p>
    </section>

    <section id="stats">
        <h2>Dengue Cases in Recent Years</h2>
        <p>Over 5 million cases of dengue were reported globally in 2023.</p>
        <p><img src="https://ourworldindata.org/grapher/exports/dengue-incidence.png?v=1" alt="Dengue Statistics" class="responsive-image"></p>
    </section>

    <section id="login">
        <h2>Login to Track Your Contributions</h2>
        <button id="google-signin">Sign in with Google</button>
        <p id="user-info"></p>
    </section>

    <footer>
        <p>Stay informed and take action. Together, we can fight dengue!</p>
    </footer>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase Modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBioGgdFP3CaadF9iW0EXBvHwMG1__iKr4",
            authDomain: "dengue-454102.firebaseapp.com",
            projectId: "dengue-454102",
            storageBucket: "dengue-454102.appspot.com"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        const provider = new GoogleAuthProvider();
        const storage = getStorage(app);

        // Google Sign-In Functionality
        document.getElementById("google-signin").addEventListener("click", () => {
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    document.getElementById("user-info").innerHTML = `Signed in as: ${user.email}`;
                    localStorage.setItem("userEmail", user.email); // Store user email for tracking uploads
                })
                .catch((error) => {
                    console.error("Login Error:", error);
                });
        });

        // Function to Get Image URLs from Firebase Storage
        async function getImageURLs(userId) {
            try {
                const beforeRef = ref(storage, `user_uploads/${userId}/before.jpg`);
                const afterRef = ref(storage, `user_uploads/${userId}/after.jpg`);

                const beforeURL = await getDownloadURL(beforeRef);
                const afterURL = await getDownloadURL(afterRef);

                console.log("Before Image URL:", beforeURL);
                console.log("After Image URL:", afterURL);

                return { beforeURL, afterURL };
            } catch (error) {
                console.error("Error retrieving images:", error);
            }
        }

        // Example Usage - Replace 'USER_ID' with actual user ID
        getImageURLs("USER_ID").then(urls => {
            if (urls) {
                console.log("Retrieved URLs:", urls);
            }
        });
    </script>

    <script src="script.js"></script>
</body>
</html>
