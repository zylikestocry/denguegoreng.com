<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Stagnant Water</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Report Stagnant Water</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="prevention.html">How to Prevent Dengue</a></li>
                <li><a href="clear-stagnant-water.html">Clear Stagnant Water</a></li>
                <li><a href="quiz.html">Quiz</a></li>
            </ul>
        </nav>
    </header>

    <section>
        <h2>Submit Your Report</h2>
        <p>Upload photos of stagnant water and its removal.</p>

        <!-- ✅ Image Upload Form (Linked to Google Forms) -->
        <form id="uploadForm" action="https://docs.google.com/forms/d/e/YOUR_FORM_ID/formResponse" method="POST" enctype="multipart/form-data">
            <label for="beforeImage">Before (Stagnant Water):</label><br>
            <input type="file" id="beforeImage" name="entry.YOUR_BEFORE_FIELD_ID" accept="image/*" required><br><br>

            <label for="afterImage">After (Cleared Water):</label><br>
            <input type="file" id="afterImage" name="entry.YOUR_AFTER_FIELD_ID" accept="image/*" required><br><br>

            <!-- ✅ Hidden Input to Store User ID -->
            <input type="hidden" id="userIDField" name="entry.YOUR_USERID_FIELD_ID">

            <button type="submit">Submit</button>
        </form>
    </section>

    <footer>
        <p>Stay informed and take action. Together, we can fight dengue!</p>
    </footer>

    <script>
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + value + expires + "; path=/";
        }

        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i].trim();
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        document.addEventListener("DOMContentLoaded", function() {
            let userID = getCookie("userID");
            
            // ✅ If userID doesn't exist, create and store it
            if (!userID) {
                userID = "user_" + Math.floor(Math.random() * 999999);
                setCookie("userID", userID, 365); // Store for 1 year
            }

            // ✅ Set userID in hidden form field
            document.getElementById("userIDField").value = userID;

            console.log("User ID:", userID);
        });
    </script>

</body>
</html>
